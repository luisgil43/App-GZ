{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Galería — Cámara GPS</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter;background:#0b1220;color:#e5e7eb}
    .top{position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:8px;background:#0b1220;padding:12px 14px;border-bottom:1px solid #1f2937}
    .back{width:40px;height:40px;border-radius:999px;display:grid;place-items:center;background:#111827;color:#fff;border:1px solid #1f2937}
    .title{font-weight:700}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:6px;padding:10px}
    .card{position:relative;border-radius:10px;overflow:hidden;background:#111827}
    img{width:100%;height:120px;object-fit:cover;display:block}
    .meta{position:absolute;left:6px;right:6px;bottom:6px;font-size:10px;background:rgba(0,0,0,.55);padding:4px 6px;border-radius:6px}
    .del{position:absolute;top:6px;right:6px;width:26px;height:26px;border-radius:999px;border:none;background:rgba(220,38,38,.9);color:#fff;font-weight:700}
    .empty{padding:40px;text-align:center;color:#94a3b8}
  </style>
</head>
<body>
  <div class="top">
    <a class="back" href="{% url 'geo_cam:capture' %}" title="Cámara">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
    </a>
    <div class="title">Galería</div>
  </div>

  {% if photos %}
    <div class="grid">
      {% for p in photos %}
        <div class="card">
          <img src="{{ p.image.url }}" alt="foto">
          <form method="post" action="{% url 'geo_cam:delete' p.pk %}">
            {% csrf_token %}
            <button class="del" title="Eliminar" onclick="return confirm('¿Eliminar foto?')">×</button>
          </form>
          <div class="meta">
            {{ p.titulo_manual|default:"—" }} · {{ p.created_at|date:"Y-m-d H:i" }}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty">Aún no hay fotos en tu galería.</div>
  {% endif %}
</body>
</html>